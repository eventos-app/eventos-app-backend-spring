version: '3.3'

services:
  db:
    image: postgres:14  # Utiliza una versión específica
    container_name: postgres_db
    environment:
      POSTGRES_DB: festiva-db     # Nombre de la base de datos a crear
      POSTGRES_USER: festiva        # Usuario de la base de datos
      POSTGRES_PASSWORD: festiva-89320 # Contraseña del usuario
    volumes:
      - ./sql/init.sql:/docker-entrypoint-initdb.d/festiva-schema.sql
      - ./sql/data.sql:/docker-entrypoint-initdb.d/festiva-data.sql
    ports:
      - "5432:5432"  # Mapea el puerto 5432
    restart: unless-stopped  # Reinicia el contenedor a menos que se detenga manualmente

volumes:
  db_data:  # Define el volumen para la persistencia